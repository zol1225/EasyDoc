import { useMemo, useState } from "react";
import { Navigate, Route, Routes, useNavigate } from "react-router-dom";

const featureCards = [
  {
    icon: "??",
    title: "????????? ?????? ??????",
    text: "???????????? ????????, ??????? ?????? ?????????? ????????? ?? ????? ??????? ???????, ?????, ??????? ??? ????? ???? ?????? ???????.",
    tone: "blue",
  },
  {
    icon: "??",
    title: "??? ????? ????????????",
    text: "Hybrid deployment model ??????? ????????? cloud ????? ?????? ??????? ????????? ??????????, ??? ????? ????????.",
    tone: "orange",
  },
  {
    icon: "??",
    title: "????? ????? ?????? AI ??????",
    text: "AI ?????? ?? ????? ????? ????????????, ????????? ????? ?????? ?????? ?????? ???????.",
    tone: "green",
  },
];

const pricing = [
  {
    title: "Basic Plan",
    subtitle: "Suitable for small teams",
    price: "$29",
    unit: "/month",
    points: [
      "Limited number of users (up to 5)",
      "Standard document tracking",
      "Basic archive storage (10GB)",
      "Email support",
      "Monthly reporting",
    ],
    cta: "Choose Basic",
    highlighted: false,
  },
  {
    title: "Pro Plan",
    subtitle: "Suitable for organizations",
    price: "$99",
    unit: "/month",
    note: "$990/year (Save 17%)",
    points: [
      "Unlimited users",
      "Advanced tracking & reporting",
      "Full archive management (unlimited)",
      "Role & permission control",
      "Priority support",
      "Custom integrations",
    ],
    cta: "Choose Pro",
    highlighted: true,
  },
];

const stats = [
  { title: "???? ????? ?????", value: 126, icon: "??", tone: "purple" },
  { title: "???? ????? ?????", value: 24, icon: "?", tone: "blue" },
  { title: "?????????? ????? ?????", value: 16, icon: "?", tone: "orange" },
  { title: "???????????? ????? ?????", value: 104, icon: "?", tone: "green" },
];

const monthly = [
  { label: "1 ???", value: 28, tone: "purple" },
  { label: "2 ???", value: 14, tone: "blue" },
  { label: "3 ???", value: 32, tone: "purple" },
  { label: "4 ???", value: 24, tone: "blue" },
  { label: "5 ???", value: 11, tone: "blue" },
  { label: "6 ???", value: 34, tone: "purple" },
  { label: "7 ???", value: 6, tone: "blue" },
];

const history = [
  { icon: "?", tone: "green", title: "????? ??????? ?????? - 21 ??????????", ago: "2 minutes ago" },
  { icon: "?", tone: "blue", title: "????? ??????? ?????? - 26 ????", ago: "15 minutes ago" },
  { icon: "?", tone: "orange", title: "????? ??????? ?????? - 14 ????????? ??????", ago: "2 hours ago" },
  { icon: "?", tone: "green", title: "????? ??????? ?????? - 28 ??????????", ago: "3 hours ago" },
  { icon: "?", tone: "green", title: "????? ??????? ?????? - 32 ??????????", ago: "3 hours ago" },
];

function Navbar({ onLogin }) {
  return (
    <header className="nav-wrap">
      <div className="brand">EasyDoc</div>
      <nav className="nav-links">
        <a href="#about">?????? ?????</a>
        <a href="#pricing">????? ?????</a>
        <a href="#contact" className="active">?????? ?????</a>
      </nav>
      <button className="primary-btn" onClick={onLogin}>???????</button>
    </header>
  );
}

function Hero({ onLogin }) {
  return (
    <section className="hero">
      <Navbar onLogin={onLogin} />
      <div className="hero-content">
        <div className="hero-text">
          <h1>EasyDoc</h1>
          <h2>????? ??????? ??????? ??????</h2>
          <p>?????????? ?????????? ??????? ?????? ????? ????? ?????????? ??????? ??????</p>
        </div>
        <div className="hero-illustration" aria-label="Document illustration" />
      </div>
    </section>
  );
}

function Features() {
  return (
    <section className="section features" id="about">
      <h3>????? ????? ????? ????? ?????????? ????????</h3>
      <p className="section-sub">?????????? hybrid ??????, ??????? AI ?????? ????? ????? ??????? ??????? ??????.</p>
      <div className="feature-grid">
        {featureCards.map((item) => (
          <article className={`feature-card ${item.tone}`} key={item.title}>
            <div className="icon-pill">{item.icon}</div>
            <h4>{item.title}</h4>
            <p>{item.text}</p>
          </article>
        ))}
      </div>
    </section>
  );
}

function Pricing() {
  return (
    <section className="section pricing" id="pricing">
      <h3>????? ?????</h3>
      <p className="section-sub">?????? ?????????? ?????????? ???????????? ?????????.</p>
      <div className="price-grid">
        {pricing.map((plan) => (
          <article className={`price-card ${plan.highlighted ? "highlighted" : ""}`} key={plan.title}>
            {plan.highlighted ? <span className="badge">Most Popular</span> : null}
            <h4>{plan.title}</h4>
            <p className="muted">{plan.subtitle}</p>
            <div className="price-line">
              <span className="price">{plan.price}</span>
              <span className="muted">{plan.unit}</span>
            </div>
            {plan.note ? <p className="tiny">{plan.note}</p> : null}
            <ul>
              {plan.points.map((point) => (
                <li key={point}>{point}</li>
              ))}
            </ul>
            <button className={plan.highlighted ? "primary-btn full" : "dark-btn full"}>{plan.cta}</button>
          </article>
        ))}
      </div>
    </section>
  );
}

function Footer() {
  return (
    <footer className="footer" id="contact">
      <div>
        <h5>??????????</h5>
        <p>8-12 ????? ??????????</p>
      </div>
      <div>
        <h5>?????? ?????</h5>
        <p>?????? ????????</p>
        <p>?????? ????????</p>
        <p>?????? ????????</p>
      </div>
      <div>
        <h5>???? ???????</h5>
        <p>????? ????: Mxzsurgalt@gmail.com</p>
      </div>
      <div>
        <h5>?????? ?????</h5>
        <p>????: 72721441</p>
        <p>????? ????: Mxzsurgalt@gmail.com</p>
      </div>
    </footer>
  );
}

function LoginModal({ open, onClose, onSubmit }) {
  if (!open) return null;

  return (
    <div className="modal-backdrop" role="dialog" aria-modal="true">
      <div className="modal-card">
        <button className="close" onClick={onClose}>×</button>
        <h3>???????</h3>
        <p className="muted">?-???? ????, ???? ???? ??????? ??</p>
        <label>?-???? ????</label>
        <input placeholder="???????" type="email" />
        <label>???? ??</label>
        <input placeholder="???????" type="password" />
        <a className="forgot" href="#">???? ?? ????????</a>
        <button className="primary-btn full" onClick={onSubmit}>???????</button>
      </div>
    </div>
  );
}

function LandingPage() {
  const [loginOpen, setLoginOpen] = useState(false);
  const navigate = useNavigate();

  return (
    <>
      <main className={loginOpen ? "dimmed" : ""}>
        <Hero onLogin={() => setLoginOpen(true)} />
        <Features />
        <Pricing />
        <Footer />
      </main>
      <LoginModal
        open={loginOpen}
        onClose={() => setLoginOpen(false)}
        onSubmit={() => navigate("/dashboard")}
      />
    </>
  );
}

function Dashboard() {
  const max = useMemo(() => Math.max(...monthly.map((i) => i.value)), []);

  return (
    <div className="dashboard-layout">
      <aside className="sidebar">
        <h2>EasyDoc</h2>
        <nav>
          <a href="#" className="active">????? ??????</a>
          <a href="#">????? ??????</a>
          <a href="#" className="sub active-sub">????? ????? ??????</a>
          <a href="#" className="sub">????? ????? ??????</a>
          <a href="#">????? ?????? ?????</a>
          <a href="#">??????</a>
          <a href="#">??????????? ???????</a>
          <a href="#">?????? ???????</a>
        </nav>
      </aside>

      <section className="board">
        <header className="board-top">
          <div className="board-title">????? ??????</div>
          <div className="user">
            <span className="bell">??</span>
            <div className="avatar">A</div>
            <div>
              <strong>Anu-Ujin</strong>
              <p>anuka0112@gmail.com</p>
            </div>
          </div>
        </header>

        <h3>????? ?????? ????? ?????</h3>

        <div className="stat-grid">
          {stats.map((item) => (
            <article className={`stat-card ${item.tone}`} key={item.title}>
              <p>{item.title}</p>
              <div className="stat-line">
                <span>{item.icon}</span>
                <strong>{item.value}</strong>
              </div>
            </article>
          ))}
        </div>

        <div className="chart-wrap">
          <article className="chart-card">
            <h4>??? ?????? ????? ???????? ???</h4>
            {monthly.map((row) => (
              <div className="bar-row" key={row.label}>
                <span>{row.label}</span>
                <div className="bar-track">
                  <div
                    className={`bar ${row.tone}`}
                    style={{ width: `${(row.value / max) * 100}%` }}
                  />
                </div>
                <b>{row.value}</b>
              </div>
            ))}
          </article>

          <aside className="history-card">
            <h4>??????? ????</h4>
            {history.map((item, i) => (
              <div className="history-row" key={`${item.title}-${i}`}>
                <span className={`history-icon ${item.tone}`}>{item.icon}</span>
                <div>
                  <p>{item.title}</p>
                  <small>{item.ago}</small>
                </div>
              </div>
            ))}
            <a href="#" className="more">??????? ?????</a>
          </aside>
        </div>
      </section>
    </div>
  );
}

export default function App() {
  return (
    <Routes>
      <Route path="/" element={<LandingPage />} />
      <Route path="/dashboard" element={<Dashboard />} />
      <Route path="*" element={<Navigate to="/" replace />} />
    </Routes>
  );
}
